"use strict";(self.webpackChunkoc_studio_docs=self.webpackChunkoc_studio_docs||[]).push([[324],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return h}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=i,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return n?a.createElement(h,r(r({ref:t},c),{},{components:n})):a.createElement(h,r({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:i,r[1]=l;for(var p=2;p<o;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7708:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return u}});var a=n(7462),i=n(3366),o=(n(7294),n(3905)),r=["components"],l={title:"CMS API"},s=void 0,p={unversionedId:"development/api/cms",id:"development/api/cms",title:"CMS API",description:"The CMS API has both RESTful components and a GraphQL endpoint.  It is the main source of content and events push for your assistant application and allows you to programmatically CRUD intents, handlers, and entities for a specific application.",source:"@site/docs/development/api/cms.md",sourceDirName:"development/api",slug:"/development/api/cms",permalink:"/docs/development/api/cms",draft:!1,editUrl:"https://github.com/xapp-ai/documentation/edit/main/docs/development/api/cms.md",tags:[],version:"current",frontMatter:{title:"CMS API"}},c={},u=[{value:"Authorization",id:"authorization",level:2},{value:"Organization Level Token",id:"organization-level-token",level:3},{value:"Headers",id:"headers",level:2},{value:"Handler Content",id:"handler-content",level:2},{value:"GET /cms/handler",id:"get-cmshandler",level:3},{value:"GET /cms/handler/{id}",id:"get-cmshandlerid",level:3},{value:"App Content",id:"app-content",level:2},{value:"GET /cms/app",id:"get-cmsapp",level:3},{value:"Entity Content",id:"entity-content",level:2},{value:"GET /cms/entity",id:"get-cmsentity",level:3},{value:"GET /cms/entity/{entityId}",id:"get-cmsentityentityid",level:3},{value:"Search",id:"search",level:2},{value:"GET /cms/search",id:"get-cmssearch",level:3},{value:"GET /cms/faq/query",id:"get-cmsfaqquery",level:3},{value:"Events",id:"events",level:2},{value:"PUT /cms/app/events",id:"put-cmsappevents",level:3},{value:"Suggestions",id:"suggestions",level:2},{value:"GET /cms/suggestions",id:"get-cmssuggestions",level:3},{value:"GraphQL",id:"graphql",level:2},{value:"POST /cms/graphql",id:"post-cmsgraphql",level:3}],d={toc:u},m="wrapper";function h(e){var t=e.components,n=(0,i.Z)(e,r);return(0,o.kt)(m,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The CMS API has both RESTful components and a GraphQL endpoint.  It is the main source of content and events push for your assistant application and allows you to programmatically CRUD intents, handlers, and entities for a specific application.  "),(0,o.kt)("p",null,"The base URL for OC Studio is ",(0,o.kt)("a",{parentName:"p",href:"https://api.xapp.ai"},"https://api.xapp.ai")," but this will depend on your environment, for example if you have a single tenant instance."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("a",{parentName:"p",href:"https://app.getpostman.com/run-collection/3454397-e7916289-8f94-4c96-89bf-cef081d50205?action=collection%2Ffork&collection-url=entityId%3D3454397-e7916289-8f94-4c96-89bf-cef081d50205%26entityType%3Dcollection%26workspaceId%3Daf98e5eb-4de7-4539-b698-06cc23716e64"},(0,o.kt)("img",{parentName:"a",src:"https://run.pstmn.io/button.svg",alt:"Run in Postman"}))),(0,o.kt)("p",{parentName:"admonition"},"We have all the requests documented on Postman if you want to test them out.  You will need to generate a token for your application and add that as a variable along with the appId.  If you are using a single-tenant version, you will need to update your API.")),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"You can see a full implementation of this API in the source for the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/stentorium/stentor/blob/master/packages/stentor-service-studio/src/StudioService.ts"},"Studio Service"))),(0,o.kt)("h2",{id:"authorization"},"Authorization"),(0,o.kt)("p",null,"Authorization is required to access data from this endpoint.  A token can be generated from within Studio under Application --\x3e Developer --\x3e Tokens."),(0,o.kt)("p",null,"Generate a new token and append it as a header on each request in the form:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Authorize | Bearer {token}\n")),(0,o.kt)("h3",{id:"organization-level-token"},"Organization Level Token"),(0,o.kt)("p",null,"For situations where you are serving multiple apps from the same organization from the same runtime environment, you can use an organization token.  If you use this you can specify on the Handler content endpoints the appId you are requesting by appending the query parameter ",(0,o.kt)("inlineCode",{parentName:"p"},"?appId={appId}")),(0,o.kt)("h2",{id:"headers"},"Headers"),(0,o.kt)("p",null,"You will need to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"Authorize")," header and ",(0,o.kt)("inlineCode",{parentName:"p"},"Content-Type | application-json")," header."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'        fetch(url, {\n            method: "GET",\n            headers: {\n                "Content-Type": "application/json",\n                Authorization: `Bearer ${this.token}`\n            }\n        })\n')),(0,o.kt)("h2",{id:"handler-content"},"Handler Content"),(0,o.kt)("p",null,"At runtime, the ",(0,o.kt)("a",{parentName:"p",href:"../../content/handlers"},"handler")," contains information about how to respond to certain incoming requests. "),(0,o.kt)("h3",{id:"get-cmshandler"},"GET /cms/handler"),(0,o.kt)("p",null,"Get a list of all available handlers."),(0,o.kt)("h3",{id:"get-cmshandlerid"},"GET /cms/handler/{id}"),(0,o.kt)("p",null,"Get a specific handler by ID."),(0,o.kt)("h2",{id:"app-content"},"App Content"),(0,o.kt)("h3",{id:"get-cmsapp"},"GET /cms/app"),(0,o.kt)("p",null,"Get information about the app."),(0,o.kt)("h2",{id:"entity-content"},"Entity Content"),(0,o.kt)("h3",{id:"get-cmsentity"},"GET /cms/entity"),(0,o.kt)("p",null,"Get a list of entities."),(0,o.kt)("h3",{id:"get-cmsentityentityid"},"GET /cms/entity/{entityId}"),(0,o.kt)("p",null,"Get a specific entity."),(0,o.kt)("h2",{id:"search"},"Search"),(0,o.kt)("h3",{id:"get-cmssearch"},"GET /cms/search"),(0,o.kt)("p",null,"Search for provided text through query string ",(0,o.kt)("inlineCode",{parentName:"p"},'?question="{text}"'),", for example ",(0,o.kt)("inlineCode",{parentName:"p"},'/cms/search/question="my query"'),"."),(0,o.kt)("h3",{id:"get-cmsfaqquery"},"GET /cms/faq/query"),(0,o.kt)("p",null,"Search within FAQs."),(0,o.kt)("h2",{id:"events"},"Events"),(0,o.kt)("h3",{id:"put-cmsappevents"},"PUT /cms/app/events"),(0,o.kt)("p",null,"Put runtime events to your assistant application."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"/docs/development/api/runtime-events"},"Read More"))),(0,o.kt)("h2",{id:"suggestions"},"Suggestions"),(0,o.kt)("h3",{id:"get-cmssuggestions"},"GET /cms/suggestions"),(0,o.kt)("p",null,"Get autocomplete suggestions, you must provide query parameters ",(0,o.kt)("inlineCode",{parentName:"p"},"key=")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"queryText="),".  Key is from the respective channel the suggestions are being served from.  Additionally, you can filter by types, ",(0,o.kt)("inlineCode",{parentName:"p"},"type=INTENT,FAQ")," will just return model and FAQ based suggestions while omitting HISTORICAL.  Excluding ",(0,o.kt)("inlineCode",{parentName:"p"},"type=")," defaults to returning all three."),(0,o.kt)("h2",{id:"graphql"},"GraphQL"),(0,o.kt)("h3",{id:"post-cmsgraphql"},"POST /cms/graphql"),(0,o.kt)("p",null,"An identical API with our dedicated ",(0,o.kt)("a",{parentName:"p",href:"/docs/development/api/graphql"},"GraphQL")," endpoint, the one found at ",(0,o.kt)("inlineCode",{parentName:"p"},"/cms/graphql")," expect with more limited access.  Since the token used for authentication only allows you access to a specific application, you are only allowed to CRUD (create, read, update, delete) intents, handlers, & entities."),(0,o.kt)("p",null,"This endpoint is meant for programmatic management of your models within Studio.  For example you can update a list of entities based on an external catalog of data at regular intervals or based on modifications to the catalog."))}h.isMDXComponent=!0}}]);